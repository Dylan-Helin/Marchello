{"remainingRequest":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\src\\components\\MarchelloChat.vue?vue&type=style&index=0&id=3e5897a5&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\src\\components\\MarchelloChat.vue","mtime":1634918359835},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojZGlzY3Vzc2lvbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzBDMEMwQzsKICBhbGlnbi1jb250ZW50OiBjZW50ZXI7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBtYXJnaW4tcmlnaHQ6IDEwJTsKICBtYXJnaW4tbGVmdDogMTAlOwogIHBhZGRpbmctcmlnaHQ6IDEwcHg7CiAgcGFkZGluZy1sZWZ0OiAxMHB4Owp9CiNtZXNzYWdlIHsKICBwYWRkaW5nLXRvcDogMTBweDsKICBwYWRkaW5nLWJvdHRvbTogMTBweDsKfQo="},{"version":3,"sources":["MarchelloChat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MarchelloChat.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div id=\"discussion\">\n      <div\n        v-for=\"(m, index) in messages\"\n        id=\"message\"\n        :key=\"index\"\n      >\n        <div\n          v-if=\"m.senderName === 'Marchello'\"\n        >\n          <p style=\"text-align: right\">\n            <b><i>Marchello :</i></b>\n            <br>\n            {{ m.message }}\n          </p>\n        </div>\n        <div\n          v-else\n        >\n          <p style=\"text-align: left\">\n            <b><i>Roberto :</i></b>\n            <br>\n            {{ m.message }}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div\n      style=\"margin-right: 10%;\n            margin-left: 10%;\"\n    >\n      <form @submit.prevent=\"saveMessage\">\n        <div\n          v-if=\"messages.length === 0\"\n        >\n          <table style=\"margin: auto;\">\n            <tr>\n              <td>\n                <p>\n                  Roberto :\n                  <input\n                    v-model=\"message.message\"\n                    type=\"text\"\n                    size=\"50\"\n                    required\n                  >\n                </p>\n              </td>\n              <td>\n                <div v-if=\"errorMessage.name\">\n                  {{ errorMessage.message }}\n                </div>\n                <button\n                  type=\"submit\"\n                  :disabled=\"!formIsValid\"\n                >\n                  Envoyer\n                </button>\n              </td>\n            </tr>\n          </table>\n        </div>\n        <div\n          v-else\n        >\n          <table style=\"margin: auto; margin-right: 0;\">\n            <tr>\n              <td>\n                <p>\n                  Roberto :\n                  <input\n                    v-model=\"message.message\"\n                    type=\"text\"\n                    size=\"50\"\n                    required\n                  >\n                </p>\n              </td>\n              <td>\n                <div v-if=\"errorMessage.name\">\n                  {{ errorMessage.message }}\n                </div>\n                <button\n                  type=\"submit\"\n                  :disabled=\"!formIsValid\"\n                >\n                  Envoyer\n                </button>\n              </td>\n            </tr>\n          </table>\n        </div>\n        <p v-if=\"genericError\">\n          Marchello n'a pas compris votre message\n        </p>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport marchelloApi from '../api/marchelloApi';\n\nexport default {\n  name: 'MarchelloChat',\n  data() {\n    return {\n      genericError: false,\n      message: {\n        senderName: '',\n        message: '',\n        date: ''\n      },\n      messages: [],\n      errorMessage: {}\n    };\n  },\n  computed: {\n    formIsValid() {\n      return this.message.message !== '';\n    }\n  },\n  methods: {\n    async saveMessage() {\n      try {\n        if (this.formIsValid) {\n          this.message.senderName = 'Roberto';\n          // Setting the date of today.\n          let today = new Date();\n          var dd = String(today.getDate()).padStart(2, '0');\n          var mm = String(today.getMonth() + 1).padStart(2, '0');\n          var yyyy = today.getFullYear();\n          today = yyyy + '-' + mm + '-' + dd;\n          this.message.date = today;\n          await marchelloApi.createMessage(this.message);\n          this.messages.push(Object.assign({}, this.message));\n          this.message.senderName = 'Marchello';\n          // If Roberto says \"Comment est votre blanquette ?\" it triggers an event.\n          if (this.message.message === 'Comment est votre blanquette ?') {\n            this.message.message = 'Elle est bonne';\n          } else {\n            if (this.messages.length >= 3) {\n              if (this.messages[this.messages.length - 3].message === 'Comment est votre blanquette ?' && this.message.message === 'On me dit le plus grand bien des harengs pomme-à-l’huile') {\n                this.message.message = 'Le patron vous en apportera un ramequin, vous vous ferez une idée';\n              }\n            }\n          }\n          // Make Marchello repeat or answer Roberto\n          await marchelloApi.createMessage(this.message);\n          this.messages.push(Object.assign({}, this.message));\n          this.message.message = '';\n        } else {\n          if (this.message.message === '') {\n            this.errorMessage.message = 'Le message est obligatoire.';\n          }\n        }\n      } catch (error) {\n        this.genericError = true;\n        console.error('Erreur lors de la création d\\'un message');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n#discussion {\n  background-color: #0C0C0C;\n  align-content: center;\n  border-radius: 10px;\n  margin-right: 10%;\n  margin-left: 10%;\n  padding-right: 10px;\n  padding-left: 10px;\n}\n#message {\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n</style>\n"]}]}