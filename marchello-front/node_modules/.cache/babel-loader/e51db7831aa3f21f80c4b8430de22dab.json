{"remainingRequest":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\src\\components\\MarchelloChat.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\src\\components\\MarchelloChat.vue","mtime":1634918359835},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\babel.config.js","mtime":1619021556987},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dydy2\\Documents\\GitHub\\Marchello\\marchello-front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2R5ZHkyL0RvY3VtZW50cy9HaXRIdWIvTWFyY2hlbGxvL21hcmNoZWxsby1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnBhZC1zdGFydC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBtYXJjaGVsbG9BcGkgZnJvbSAnLi4vYXBpL21hcmNoZWxsb0FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFyY2hlbGxvQ2hhdCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGdlbmVyaWNFcnJvcjogZmFsc2UsCiAgICAgIG1lc3NhZ2U6IHsKICAgICAgICBzZW5kZXJOYW1lOiAnJywKICAgICAgICBtZXNzYWdlOiAnJywKICAgICAgICBkYXRlOiAnJwogICAgICB9LAogICAgICBtZXNzYWdlczogW10sCiAgICAgIGVycm9yTWVzc2FnZToge30KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybUlzVmFsaWQ6IGZ1bmN0aW9uIGZvcm1Jc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5tZXNzYWdlLm1lc3NhZ2UgIT09ICcnOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZU1lc3NhZ2U6IGZ1bmN0aW9uIHNhdmVNZXNzYWdlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdG9kYXksIGRkLCBtbSwgeXl5eTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzLmZvcm1Jc1ZhbGlkKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMubWVzc2FnZS5zZW5kZXJOYW1lID0gJ1JvYmVydG8nOyAvLyBTZXR0aW5nIHRoZSBkYXRlIG9mIHRvZGF5LgoKICAgICAgICAgICAgICAgIHRvZGF5ID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsKICAgICAgICAgICAgICAgIG1tID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOwogICAgICAgICAgICAgICAgeXl5eSA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgICB0b2RheSA9IHl5eXkgKyAnLScgKyBtbSArICctJyArIGRkOwogICAgICAgICAgICAgICAgX3RoaXMubWVzc2FnZS5kYXRlID0gdG9kYXk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gbWFyY2hlbGxvQXBpLmNyZWF0ZU1lc3NhZ2UoX3RoaXMubWVzc2FnZSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIF90aGlzLm1lc3NhZ2UpKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlLnNlbmRlck5hbWUgPSAnTWFyY2hlbGxvJzsgLy8gSWYgUm9iZXJ0byBzYXlzICJDb21tZW50IGVzdCB2b3RyZSBibGFucXVldHRlID8iIGl0IHRyaWdnZXJzIGFuIGV2ZW50LgoKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5tZXNzYWdlLm1lc3NhZ2UgPT09ICdDb21tZW50IGVzdCB2b3RyZSBibGFucXVldHRlID8nKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLm1lc3NhZ2UubWVzc2FnZSA9ICdFbGxlIGVzdCBib25uZSc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubWVzc2FnZXMubGVuZ3RoID49IDMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMubWVzc2FnZXNbX3RoaXMubWVzc2FnZXMubGVuZ3RoIC0gM10ubWVzc2FnZSA9PT0gJ0NvbW1lbnQgZXN0IHZvdHJlIGJsYW5xdWV0dGUgPycgJiYgX3RoaXMubWVzc2FnZS5tZXNzYWdlID09PSAnT24gbWUgZGl0IGxlIHBsdXMgZ3JhbmQgYmllbiBkZXMgaGFyZW5ncyBwb21tZS3DoC1s4oCZaHVpbGUnKSB7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlLm1lc3NhZ2UgPSAnTGUgcGF0cm9uIHZvdXMgZW4gYXBwb3J0ZXJhIHVuIHJhbWVxdWluLCB2b3VzIHZvdXMgZmVyZXogdW5lIGlkw6llJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gLy8gTWFrZSBNYXJjaGVsbG8gcmVwZWF0IG9yIGFuc3dlciBSb2JlcnRvCgoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiBtYXJjaGVsbG9BcGkuY3JlYXRlTWVzc2FnZShfdGhpcy5tZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF90aGlzLm1lc3NhZ2VzLnB1c2goT2JqZWN0LmFzc2lnbih7fSwgX3RoaXMubWVzc2FnZSkpOwoKICAgICAgICAgICAgICAgIF90aGlzLm1lc3NhZ2UubWVzc2FnZSA9ICcnOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMubWVzc2FnZS5tZXNzYWdlID09PSAnJykgewogICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvck1lc3NhZ2UubWVzc2FnZSA9ICdMZSBtZXNzYWdlIGVzdCBvYmxpZ2F0b2lyZS4nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjM7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgX3RoaXMuZ2VuZXJpY0Vycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkXCd1biBtZXNzYWdlJyk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzAsIDIzXV0pOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["MarchelloChat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div id=\"discussion\">\n      <div\n        v-for=\"(m, index) in messages\"\n        id=\"message\"\n        :key=\"index\"\n      >\n        <div\n          v-if=\"m.senderName === 'Marchello'\"\n        >\n          <p style=\"text-align: right\">\n            <b><i>Marchello :</i></b>\n            <br>\n            {{ m.message }}\n          </p>\n        </div>\n        <div\n          v-else\n        >\n          <p style=\"text-align: left\">\n            <b><i>Roberto :</i></b>\n            <br>\n            {{ m.message }}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div\n      style=\"margin-right: 10%;\n            margin-left: 10%;\"\n    >\n      <form @submit.prevent=\"saveMessage\">\n        <div\n          v-if=\"messages.length === 0\"\n        >\n          <table style=\"margin: auto;\">\n            <tr>\n              <td>\n                <p>\n                  Roberto :\n                  <input\n                    v-model=\"message.message\"\n                    type=\"text\"\n                    size=\"50\"\n                    required\n                  >\n                </p>\n              </td>\n              <td>\n                <div v-if=\"errorMessage.name\">\n                  {{ errorMessage.message }}\n                </div>\n                <button\n                  type=\"submit\"\n                  :disabled=\"!formIsValid\"\n                >\n                  Envoyer\n                </button>\n              </td>\n            </tr>\n          </table>\n        </div>\n        <div\n          v-else\n        >\n          <table style=\"margin: auto; margin-right: 0;\">\n            <tr>\n              <td>\n                <p>\n                  Roberto :\n                  <input\n                    v-model=\"message.message\"\n                    type=\"text\"\n                    size=\"50\"\n                    required\n                  >\n                </p>\n              </td>\n              <td>\n                <div v-if=\"errorMessage.name\">\n                  {{ errorMessage.message }}\n                </div>\n                <button\n                  type=\"submit\"\n                  :disabled=\"!formIsValid\"\n                >\n                  Envoyer\n                </button>\n              </td>\n            </tr>\n          </table>\n        </div>\n        <p v-if=\"genericError\">\n          Marchello n'a pas compris votre message\n        </p>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport marchelloApi from '../api/marchelloApi';\n\nexport default {\n  name: 'MarchelloChat',\n  data() {\n    return {\n      genericError: false,\n      message: {\n        senderName: '',\n        message: '',\n        date: ''\n      },\n      messages: [],\n      errorMessage: {}\n    };\n  },\n  computed: {\n    formIsValid() {\n      return this.message.message !== '';\n    }\n  },\n  methods: {\n    async saveMessage() {\n      try {\n        if (this.formIsValid) {\n          this.message.senderName = 'Roberto';\n          // Setting the date of today.\n          let today = new Date();\n          var dd = String(today.getDate()).padStart(2, '0');\n          var mm = String(today.getMonth() + 1).padStart(2, '0');\n          var yyyy = today.getFullYear();\n          today = yyyy + '-' + mm + '-' + dd;\n          this.message.date = today;\n          await marchelloApi.createMessage(this.message);\n          this.messages.push(Object.assign({}, this.message));\n          this.message.senderName = 'Marchello';\n          // If Roberto says \"Comment est votre blanquette ?\" it triggers an event.\n          if (this.message.message === 'Comment est votre blanquette ?') {\n            this.message.message = 'Elle est bonne';\n          } else {\n            if (this.messages.length >= 3) {\n              if (this.messages[this.messages.length - 3].message === 'Comment est votre blanquette ?' && this.message.message === 'On me dit le plus grand bien des harengs pomme-à-l’huile') {\n                this.message.message = 'Le patron vous en apportera un ramequin, vous vous ferez une idée';\n              }\n            }\n          }\n          // Make Marchello repeat or answer Roberto\n          await marchelloApi.createMessage(this.message);\n          this.messages.push(Object.assign({}, this.message));\n          this.message.message = '';\n        } else {\n          if (this.message.message === '') {\n            this.errorMessage.message = 'Le message est obligatoire.';\n          }\n        }\n      } catch (error) {\n        this.genericError = true;\n        console.error('Erreur lors de la création d\\'un message');\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n#discussion {\n  background-color: #0C0C0C;\n  align-content: center;\n  border-radius: 10px;\n  margin-right: 10%;\n  margin-left: 10%;\n  padding-right: 10px;\n  padding-left: 10px;\n}\n#message {\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}